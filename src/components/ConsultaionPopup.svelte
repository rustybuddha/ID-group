<script lang="ts">
  import { fade, scale } from "svelte/transition";
  import FormBlockType1 from "./FormBlockType1.svelte";

  export let Label = "Phone No";
  export let Value = "000-000-0000";

  let inputValue = "";
  let errorMessage = "";

  import IndiaFlag from "/src/lib/images/india-flag.svg";
  import dropDown from "/src/lib/images/drop-down.svg";

  function validatePhoneNumber() {
    const phoneNumberPattern = /^\d{10}$/; // Regular expression to match exactly 10 digits

    if (!phoneNumberPattern.test(inputValue)) {
      errorMessage = "10 Digits Numeric Value required.";
    } else {
      errorMessage = "";
      alert("Form submitted successfully!");
      closePopup();
    }
  }

  import popUpImage from "/src/lib/images/pop_up.png";

  export let imageURL = popUpImage;
  // Controls whether the popup is visible
  let isVisible = false;

  // Show popup 10 seconds after the user enters the website
  setTimeout(() => {
    isVisible = true;
  }, 10);

  // Function to close the popup
  function closePopup() {
    isVisible = false;
  }
</script>

{#if isVisible}
  <div
    class="fixed z-[75] w-full h-screen bg-black/45 backdrop-blur-[5px] flex items-center justify-center p-2 md:px-0"
    transition:fade={{ duration: 500 }}
  >
    <div
      class="flex flex-col md:flex-row w-full h-[41.75rem] items-center gap-[20px] flex-shrink-0 rounded-[10px] bg-white md:w-auto md:h-[26.75rem] md:p-[20px] md:justify-center md:items-start md:gap-[34px]"
      transition:scale={{ duration: 500 }}
    >
      <!-- On mobile this 2nd -->
      <!-- Image section -->
      <div
        class="hidden md:flex md:w-[18.25rem] md:order-1 md:h-[24.25rem] h-[15rem] w-[22.75rem] items-center justify-center overflow-hidden rounded md:rounded-[5px]"
      >
        <img src={imageURL} alt="Popup Illustration" />
      </div>
      <!-- Detail section -->
      <div
        class="md:w-[18.25rem] md:order-2 h-full w-full md:h-auto flex flex-col gap-5 items-center justify-center overflow-hidden rounded md:rounded-[5px]"
      >
        <!-- On mobile this first -->
        <div
          class="w-full flex items-start md:justify-end justify-between order-1 px-5 md:p-0"
        >
          <div class="block md:hidden">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="116"
              height="24"
              viewBox="0 0 116 24"
              fill="none"
            >
              <path
                d="M20.6095 11.3558C21.7193 14.3639 21.701 17.3205 20.1878 20.1812C19.2539 21.9469 17.7487 23.1929 15.6957 23.7077C14.79 23.9348 13.81 23.9023 12.809 23.9927C12.809 23.5066 12.8031 23.0873 12.8175 22.6686C12.819 22.6242 12.9326 22.5674 13.0045 22.5436C13.231 22.4689 13.4635 22.4105 13.6915 22.3396C14.1395 22.2002 14.3973 21.9005 14.4473 21.4698C14.5013 21.0042 14.5456 20.535 14.5465 20.0672C14.5527 16.8969 14.5476 13.7266 14.5412 10.5563C14.5407 10.3046 14.5095 10.0522 14.4808 9.80135C14.4015 9.1089 13.9888 8.6963 13.2687 8.53151C12.8054 8.42546 12.8072 8.41561 12.8078 7.95419C12.8081 7.67437 12.8107 7.39455 12.8139 7.11475C12.814 7.09894 12.8292 7.08327 12.8507 7.04219C13.2884 7.04219 13.7392 7.04846 14.1898 7.04114C16.5362 7.00306 18.2698 8.07502 19.6438 9.73449C20.0398 10.2128 20.2863 10.7995 20.6095 11.3558Z"
                fill="black"
              />
              <path
                d="M2.80678 13.6374C2.80641 12.4634 2.80908 11.3165 2.80307 10.1696C2.8019 9.94573 2.7825 9.71972 2.7449 9.49865C2.63504 8.85276 2.30687 8.57952 1.60538 8.53683C1.33615 8.52044 1.06626 8.51091 0.796496 8.50547C0.53732 8.50024 0.277931 8.50434 0 8.50434C0 8.02882 0 7.56618 0 7.08838C3.37165 7.08838 6.73649 7.08838 10.1235 7.08838C10.1235 7.55327 10.1235 8.01648 10.1235 8.5359C9.61725 8.5359 9.11777 8.51572 8.6209 8.54073C7.91334 8.57634 7.48171 8.96621 7.39968 9.61736C7.36138 9.92142 7.33467 10.2288 7.33432 10.5347C7.33044 13.9664 7.33115 17.3981 7.33658 20.8298C7.33697 21.0812 7.36499 21.3356 7.41233 21.5831C7.51405 22.1151 7.93133 22.4452 8.52384 22.475C8.79345 22.4886 9.06418 22.4839 9.33442 22.4854C9.59385 22.4869 9.8533 22.4857 10.1289 22.4857C10.1289 22.9662 10.1289 23.4317 10.1289 23.9158C6.75394 23.9158 3.39105 23.9158 0.00471258 23.9158C0.00471258 23.4499 0.00471258 22.9872 0.00471258 22.482C0.438188 22.482 0.869807 22.4885 1.30104 22.4792C1.51126 22.4747 1.72486 22.4583 1.92974 22.4165C2.35605 22.3295 2.63981 22.0781 2.70569 21.6735C2.7677 21.2926 2.80108 20.904 2.80254 20.5187C2.81113 18.234 2.80678 15.9493 2.80678 13.6374Z"
                fill="black"
              />
              <path
                d="M6.4452 5.7044C5.95818 5.83654 5.49064 6.0512 5.01892 6.05954C3.61212 6.08442 2.42086 5.33916 1.93101 4.06995C1.38163 2.64651 2.0206 1.14239 3.30858 0.438429C4.13688 -0.0142924 5.03002 -0.134577 5.92274 0.163087C8.31 0.959085 8.81251 3.50938 7.30103 5.08343C7.06834 5.32577 6.74446 5.49148 6.4452 5.7044Z"
                fill="#EF0206"
              />
              <path
                d="M28.0803 8.30838C29.2445 7.37878 30.5509 7.1879 31.9608 7.18341C32.1502 7.9278 32.1618 8.42273 31.3038 8.85284C30.1331 9.43967 30.09 10.8375 31.2334 11.5263C32.4631 12.267 33.8366 12.8032 35.1628 13.3987C37.1485 14.2903 38.5749 15.5845 38.8114 17.7457C39.1823 21.1335 36.1217 23.976 32.4033 23.6538C32.4033 23.2639 32.4033 22.8684 32.4033 22.4445C32.5654 22.3913 32.71 22.3401 32.8572 22.2962C33.7376 22.0331 34.4443 21.4748 34.3168 20.6266C34.2273 20.0318 33.717 19.3227 33.169 18.9939C32.1052 18.3559 30.8729 17.9682 29.7283 17.4427C28.3774 16.8225 27.2175 15.9933 26.5586 14.6731C25.5409 12.6341 26.053 9.77045 28.0803 8.30838Z"
                fill="black"
              />
              <path
                d="M97.7422 12.7022C97.7425 15.5426 97.7439 18.2711 97.7424 20.9996C97.7421 21.5633 97.7093 22.1033 98.5215 22.2777C98.7252 22.3214 99.0208 22.7898 98.9555 22.9479C98.8526 23.1969 98.4834 23.5108 98.2209 23.5158C95.9867 23.5584 93.7506 23.5564 91.5165 23.5097C91.2561 23.5043 90.8276 23.1676 90.7971 22.946C90.766 22.7197 91.1368 22.4504 91.3184 22.1918C91.5705 21.833 92.0181 21.4692 92.0233 21.1031C92.0755 17.4035 92.0795 13.7026 92.0182 10.0032C92.0115 9.59996 91.5022 9.20819 91.2402 8.80307C91.0703 8.54029 90.7607 8.22554 90.8181 8.00271C90.8733 7.78829 91.3175 7.52389 91.5954 7.51917C93.7916 7.48179 95.9893 7.48341 98.1854 7.52637C98.4565 7.53167 98.8334 7.80302 98.948 8.04099C99.0236 8.19811 98.7655 8.68583 98.5742 8.73323C97.6554 8.96075 97.7284 9.59156 97.7391 10.2355C97.752 11.0203 97.7422 11.8053 97.7422 12.7022Z"
                fill="black"
              />
              <path
                d="M56.6017 7.53606C58.7998 7.49568 60.9117 7.46166 63.0216 7.50896C63.4621 7.51885 63.895 7.82901 64.3314 8.00081C64.0704 8.3054 63.7731 8.58951 63.5592 8.92069C63.3671 9.21816 63.1478 9.56608 63.1438 9.89392C63.101 13.3642 63.0436 16.8363 63.1374 20.3044C63.154 20.9177 63.8901 21.496 64.2147 22.1262C64.456 22.5946 64.5691 23.1209 64.7394 23.6215C64.6342 23.7476 64.5291 23.8737 64.424 23.9998C62.9459 23.6645 61.4154 23.4596 60.0029 22.9615C58.1772 22.3178 57.3736 20.9103 57.3841 19.0826C57.401 16.1343 57.3801 13.1858 57.4023 10.2375C57.4073 9.56648 57.3819 9.03376 56.5561 8.71833C55.932 8.47992 55.9919 7.97452 56.6017 7.53606Z"
                fill="black"
              />
              <path
                d="M50.3131 13.8225C50.3152 16.2512 50.307 18.5678 50.3259 20.8842C50.3312 21.5285 50.3896 22.1582 51.329 22.2825C51.5312 22.3093 51.8324 22.7064 51.8106 22.9064C51.7878 23.1151 51.4561 23.3335 51.2099 23.4689C51.0169 23.575 50.7485 23.5944 50.5133 23.5953C48.4761 23.6033 46.4376 23.6324 44.4025 23.5704C43.9602 23.5569 43.5298 23.2032 43.094 23.0062C43.4064 22.7073 43.7858 22.4468 44.013 22.0991C44.2573 21.7252 44.4978 21.2706 44.501 20.8496C44.5305 17.0004 44.5079 13.1509 44.5008 9.30147C44.4998 8.74666 44.5007 8.19184 44.5007 7.54541C46.4926 7.54541 48.3471 7.54541 50.3131 7.54541C50.3131 9.61553 50.3131 11.6629 50.3131 13.8225Z"
                fill="black"
              />
              <path
                d="M80.8807 18.5345C80.8807 20.2454 80.8807 21.844 80.8807 23.5599C78.7803 23.5599 76.7642 23.5856 74.7505 23.5316C74.4539 23.5237 74.0735 23.1831 73.9223 22.9056C73.8552 22.7823 74.2627 22.4338 74.4532 22.1864C74.6797 21.8922 75.0963 21.5995 75.1011 21.3015C75.163 17.4218 75.1825 13.5411 75.1518 9.66103C75.1495 9.37182 74.6709 9.09362 74.4344 8.79588C74.2424 8.55404 73.898 8.24423 73.9543 8.04855C74.0218 7.81439 74.4396 7.51648 74.7124 7.5104C76.7345 7.46533 78.7583 7.48598 80.8807 7.48598C80.8807 11.1996 80.8807 14.811 80.8807 18.5345Z"
                fill="black"
              />
              <path
                d="M100.578 14.1829C100.994 10.6139 103.184 7.9717 106.219 7.3171C106.67 7.21998 107.138 7.19441 107.597 7.13574C107.695 7.2161 107.793 7.29647 107.891 7.37684C107.644 7.83688 107.376 8.28825 107.157 8.75957C106.958 9.18519 106.672 9.63137 106.668 10.0706C106.633 13.6151 106.622 17.1606 106.695 20.7042C106.706 21.2478 107.204 21.7741 107.431 22.3251C107.601 22.7388 107.697 23.1793 107.862 23.7306C105.204 23.8039 103.397 22.799 102.073 20.9326C100.633 18.9029 100.4 16.6311 100.578 14.1829Z"
                fill="black"
              />
              <path
                d="M111.842 7.82456C114.153 9.07569 115.35 10.9716 115.756 13.2777C116.329 16.5322 116.03 19.6315 113.333 22.1213C112.112 23.2494 110.62 23.764 108.55 23.6841C108.821 23.1164 109.05 22.6577 109.261 22.1916C109.484 21.6978 109.866 21.1996 109.875 20.6989C109.934 17.1113 109.937 13.5224 109.89 9.93465C109.885 9.5322 109.455 9.13537 109.226 8.73445C108.982 8.3098 108.743 7.88338 108.501 7.45773C108.621 7.32087 108.741 7.18402 108.861 7.04718C109.829 7.29335 110.796 7.53951 111.842 7.82456Z"
                fill="black"
              />
              <path
                d="M85.4327 8.29541C90.3595 10.8426 90.2277 19.0098 86.497 21.9891C85.1837 23.0379 83.7309 23.5477 81.9808 23.5437C81.7516 22.8606 81.7681 22.4001 82.5534 21.9768C82.9605 21.7573 83.2818 21.0681 83.2906 20.5855C83.3516 17.229 83.3612 13.8701 83.2757 10.5145C83.2627 10.0002 82.6627 9.50513 82.3574 8.98919C82.1515 8.64146 81.9864 8.27265 81.803 7.91328C82.1575 7.78276 82.5448 7.49471 82.8603 7.55208C83.7092 7.70648 84.5275 8.00837 85.4327 8.29541Z"
                fill="black"
              />
              <path
                d="M67.0166 7.62353C68.4439 7.54272 69.798 7.48784 71.1516 7.49696C71.415 7.49873 71.8699 7.72454 71.8945 7.8912C71.9333 8.15418 71.7666 8.60223 71.5406 8.71467C70.2629 9.35031 70.1534 10.3945 70.1473 11.5783C70.1328 14.3386 70.1344 17.105 69.9337 19.8564C69.7847 21.898 67.9775 23.4421 65.6965 23.7572C65.6965 23.2843 65.6965 22.8216 65.6965 22.2442C68.2679 21.7619 68.6932 19.8973 68.6809 17.7849C68.6687 15.6921 68.6351 13.5993 68.6333 11.5065C68.6323 10.3666 68.4075 9.3783 67.228 8.73211C66.9925 8.60312 67.0309 8.0366 67.0166 7.62353Z"
                fill="black"
              />
              <path
                d="M27.9692 19.3681C28.7532 20.688 29.5156 21.8858 31.0884 22.4224C31.373 22.5195 31.4409 23.1721 31.6088 23.5683C31.5199 23.6606 31.431 23.753 31.3421 23.8453C30.5265 23.6386 29.7213 23.3688 28.8914 23.2494C28.4179 23.1813 27.8428 23.2463 27.4213 23.4485C26.5811 23.8514 26.1163 23.7086 26.0755 22.7988C26.0135 21.4187 26.0037 20.0329 26.0707 18.6538C26.0881 18.2939 26.4718 17.9496 26.6873 17.5982C27.0031 17.8809 27.3642 18.1323 27.6192 18.4568C27.7975 18.6838 27.8309 19.0105 27.9692 19.3681Z"
                fill="black"
              />
              <path
                d="M35.6033 10.0823C34.9879 9.60602 34.4619 9.13906 33.8533 8.80334C32.9686 8.31535 32.9432 8.35571 33.0987 7.16522C33.4735 7.21143 33.8688 7.20295 34.2207 7.31443C35.2216 7.63143 36.1847 8.09793 37.2536 7.42773C37.3473 7.36895 38.0794 7.84346 38.0968 8.09557C38.1893 9.43363 38.185 10.7812 38.1233 12.1218C38.1105 12.3993 37.7122 12.6612 37.4915 12.9303C37.1998 12.7201 36.7959 12.5657 36.6385 12.2887C36.2507 11.6059 35.976 10.8668 35.6033 10.0823Z"
                fill="black"
              />
              <path
                d="M54.5458 12.7924C53.7962 13.3844 53.2697 13.1508 53.0876 12.4297C52.7683 11.1645 52.5787 9.89663 51.4356 8.94235C51.1676 8.71865 51.3294 8.04437 51.2887 7.5155C52.4377 7.5155 53.4584 7.5155 54.5859 7.5155C54.5859 9.25098 54.5859 10.9798 54.5458 12.7924Z"
                fill="black"
              />
              <path
                d="M42.2586 10.6841C42.0621 11.379 41.9673 12.0177 41.7027 12.5875C41.5838 12.8435 41.1298 13.0878 40.8199 13.0967C40.6233 13.1024 40.2428 12.6696 40.2348 12.4251C40.1819 10.8034 40.2074 9.1795 40.2074 7.52386C41.37 7.52386 42.4259 7.52386 43.8904 7.52386C43.4965 8.31658 43.2023 8.92535 42.8921 9.52686C42.7046 9.89027 42.4923 10.2424 42.2586 10.6841Z"
                fill="black"
              />
            </svg>
          </div>
          <button on:click={closePopup} aria-label="Close popup">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <g clip-path="url(#clip0_886_6983)">
                <path
                  d="M18 6L6 18"
                  stroke="#111111"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M6 6L18 18"
                  stroke="#111111"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_886_6983">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </button>
        </div>
        <!-- On mobile this 3nd -->
        <h2
          class="text-[#111] font-medium text-[28px] leading-[33.6px] font-playfairDisplay md:text-[28px] md:leading-[33.6px] md:order-3 order-2 pt-2 px-5 md:px-0 border-t-2 md:pt-0 md:border-t-0"
        >
          Get a free design consultation with us
        </h2>
        <div
          class="md:w-[18.25rem] md:hidden md:order-1 order-2 md:h-[24.25rem] h-[15rem] w-full flex items-center justify-center overflow-hidden rounded md:rounded-[5px] p-4"
        >
          <img src={imageURL} alt="Popup Illustration" />
        </div>
        <!-- On mobile this 4th -->
        <form
          class="flex flex-col items-center gap-5 md:order-4 order-3 w-full px-5 md:px-0"
        >
          <div class="flex flex-col gap-5 md:scale-90 w-full">
            <FormBlockType1 Label="Name" Value="" />
            <div class="flex flex-col items-start gap-3">
              <div class="flex gap-3 justify-center items-center">
                <span
                  class="text-[#292929] font-inter-tight text-sm leading-[160%] sm:text-base sm:leading-[160%]"
                >
                  {Label}
                </span>
      
                {#if errorMessage}
                  <span class="text-red-500 text-xs sm:text-sm">{errorMessage}</span>
                {/if}
              </div>
      
              <div
                class="flex w-full max-w-[348px] h-[48px] items-center rounded-[4px] border-[1px] border-[#0000001A] divide-x-2 sm:max-w-[546px] sm:h-[50px] sm:rounded-[6px] sm:border-[1px] sm:border-[#0000001A] sm:self-stretch"
              >
                <div class="flex w-[89px] h-[50px] items-center gap-[8px] flex-wrap">
                  <div class="flex items-center gap-[4px] p-[10px_8px]">
                    <img src={IndiaFlag} alt="India Flag" class="w-5 h-5" />
                    <span
                      class="text-[#9D9D9D] font-inter-tight font-light text-[12px] leading-[160%] sm:text-[16px] sm:leading-[160%]"
                    >
                      +91
                    </span>
                    <!-- <button>
                      <img src={dropDown} alt="" class="w-[20px] h-[20px]" />
                      </button> -->
                  </div>
                </div>
                <input
                  class="text-[#9D9D9D] w-full h-full px-[10px] font-inter-tight font-light text-[12px] leading-[140%] sm:text-[14px] focus:outline-none focus:ring-2 focus:ring-blue-500 sm:leading-[140%] focus:text-black"
                  bind:value={inputValue}
                  type="text"
                  placeholder={Value}
                />
              </div>
      
              <style>
                input:not(:placeholder-shown) {
                  color: black;
                }
              </style>
            </div>
          </div>
          <!-- on mobile this 5th -->
          <div
            class="flex justify-center w-11/12 bg-gradient-to-b from-[#5BD066] to-[#27B43E] rounded-full px-3 py-2"
          >
            <button
              type="submit"
              class="text-white w-full font-inter-tight text-xs font-normal leading-[140%] sm:text-base sm:leading-[140%]"
              on:click={validatePhoneNumber}
            >
              Submit
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
{/if}
